<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>59.0</apiVersion>
    <assignments>
        <description>All the Data isn&apos;t present to determine if Slow or Quick Collection Criteria is met.  Therefore, the job commission isn&apos;t eligible for any.</description>
        <name>Doesn_t_Met_Any_Total_Collection_Criteria</name>
        <label>Doesn&apos;t Met Any Total Collection Criteria</label>
        <locationX>50</locationX>
        <locationY>242</locationY>
        <assignmentItems>
            <assignToReference>varP_DefaultQuickCollectionMet</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>con_No</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varP_DefaultSlowCollectionMet</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>con_No</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varN_DefaultQuickCollectionIncentivePer</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varN_DefaultSlowCollectionIncentivePer</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varP_DefaultTotalCollectionType</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>con_TypeNone</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <description>Sets Default Quick Criteria Met Info and Clears Default Slow Criteria Met Info:  The Default Mets and Default Collection Incentive Percents</description>
        <name>Set_Default_Quick_Collection_Criteria</name>
        <label>Set Default Quick Collection Criteria</label>
        <locationX>578</locationX>
        <locationY>350</locationY>
        <assignmentItems>
            <assignToReference>varP_DefaultQuickCollectionMet</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>con_Yes</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varP_DefaultSlowCollectionMet</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>con_No</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varN_DefaultQuickCollectionIncentivePer</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varN_QuickCollectionIncentivePercent</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varN_DefaultSlowCollectionIncentivePer</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varP_DefaultTotalCollectionType</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>con_TypeQuickCollection</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <description>Sets Default Slow Criteria Met Info and Clears Default Quick Criteria Met Info:  The Default Mets and Default Collection Incentive Percents</description>
        <name>Set_Default_Slow_Collection_Criteria_Met</name>
        <label>Set Default Slow Collection Criteria Met</label>
        <locationX>314</locationX>
        <locationY>350</locationY>
        <assignmentItems>
            <assignToReference>varP_DefaultQuickCollectionMet</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>con_No</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varP_DefaultSlowCollectionMet</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>con_Yes</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varN_DefaultQuickCollectionIncentivePer</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varN_DefaultSlowCollectionIncentivePer</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varN_SlowCollectionIncentivePercent</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varP_DefaultTotalCollectionType</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>con_TypeSlowCollection</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <constants>
        <name>con_No</name>
        <dataType>String</dataType>
        <value>
            <stringValue>No</stringValue>
        </value>
    </constants>
    <constants>
        <name>con_TypeNone</name>
        <dataType>String</dataType>
        <value>
            <stringValue>None</stringValue>
        </value>
    </constants>
    <constants>
        <description>Quick Collection Type</description>
        <name>con_TypeQuickCollection</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Quick Collection</stringValue>
        </value>
    </constants>
    <constants>
        <name>con_TypeSlowCollection</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Slow Collection</stringValue>
        </value>
    </constants>
    <constants>
        <description>Yes</description>
        <name>con_Yes</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Yes</stringValue>
        </value>
    </constants>
    <decisions>
        <description>Has all the data needed to calculate Total Collection Eligibility?</description>
        <name>Has_Total_Collection_Criteria</name>
        <label>Has Total Collection Criteria?</label>
        <locationX>248</locationX>
        <locationY>134</locationY>
        <defaultConnector>
            <targetReference>Slow_XOR_Quick_Collection_Met</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Yes</defaultConnectorLabel>
        <rules>
            <name>No</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>varD_JobDateFullyCollected</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varD_JobWorkCompleteDate</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Doesn_t_Met_Any_Total_Collection_Criteria</targetReference>
            </connector>
            <label>No</label>
        </rules>
    </decisions>
    <decisions>
        <description>Determines if Slow XOR Quick Collection Met</description>
        <name>Slow_XOR_Quick_Collection_Met</name>
        <label>Slow XOR Quick Collection Met?</label>
        <locationX>446</locationX>
        <locationY>242</locationY>
        <defaultConnector>
            <targetReference>Set_Default_Quick_Collection_Criteria</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Quick Collection Met</defaultConnectorLabel>
        <rules>
            <name>Slow_Collection_Met</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>forN_Difference</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>varN_CollectionIncentiveThreshold</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Default_Slow_Collection_Criteria_Met</targetReference>
            </connector>
            <label>Slow Collection Met</label>
        </rules>
    </decisions>
    <description>STAR-5564, STAR-6133 This determines if the Default Total Collection Criteria is met for both Default Slow Collection and Default Quick Collection</description>
    <environments>Default</environments>
    <formulas>
        <description>Job Date Fully Collected - Job Work Complete Date</description>
        <name>forN_Difference</name>
        <dataType>Number</dataType>
        <expression>{!varD_JobDateFullyCollected} - {!varD_JobWorkCompleteDate}</expression>
        <scale>0</scale>
    </formulas>
    <interviewLabel>JobCommissionCal-Subflow-DefaultTotalCollectionCriteria {!$Flow.CurrentDateTime}</interviewLabel>
    <label>JobCommissionCal-Subflow-DefaultTotalCollectionCriteriaMet?</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <start>
        <locationX>122</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Has_Total_Collection_Criteria</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <description>This is the date First Onsite fully collected the job&apos;s full payment.  It is utilized to calculate if the job commission meets the requirement for a Quick Collect Payment commission.</description>
        <name>varD_JobDateFullyCollected</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>The work complete date of a job used to calculate the Quick Collect Payment eligibility</description>
        <name>varD_JobWorkCompleteDate</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Not editable by Sales Ops or Any Non-Admin User, used to calculate eligibility for Quick and Slow Collect Commissions.  As of now, this is 120 Days for all Tier Margins.</description>
        <name>varN_CollectionIncentiveThreshold</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <description>This is the default percent parameter of the Job Amount to collect, if Job Commission is eligible for Quick Total Collect commission based on the Job Tier.  This is NOT adjustable.</description>
        <name>varN_DefaultQuickCollectionIncentivePer</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <scale>4</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <description>This is the default percent parameter of the Job Amount to collect, if Job Commission is eligible for Slow Total Collect commission based on the Job Tier.  This is NOT adjustable.</description>
        <name>varN_DefaultSlowCollectionIncentivePer</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <scale>4</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>varN_QuickCollectionIncentivePercent</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <scale>4</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <description>Not visible to users.  This is the percentage used for the Slow Collection Incenvtive commission portion based on the Tier</description>
        <name>varN_SlowCollectionIncentivePercent</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <scale>4</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <description>Auto Set to Yes, if Date Fully Collected - Work Complete Date &lt;= 120 Days</description>
        <name>varP_DefaultQuickCollectionMet</name>
        <dataType>Picklist</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <description>Auto Set to Yes, if Date Fully Collected - Work Complete Date &gt; 120 Days</description>
        <name>varP_DefaultSlowCollectionMet</name>
        <dataType>Picklist</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <description>This is the default total collection type based on the criteria met or not</description>
        <name>varP_DefaultTotalCollectionType</name>
        <dataType>Picklist</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
</Flow>
