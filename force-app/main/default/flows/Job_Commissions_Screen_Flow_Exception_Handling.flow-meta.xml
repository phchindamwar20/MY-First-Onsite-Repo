<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>60.0</apiVersion>
    <assignments>
        <name>Assign_Actual_Commissionable_Value</name>
        <label>Assign Actual Commissionable Value</label>
        <locationX>578</locationX>
        <locationY>782</locationY>
        <assignmentItems>
            <assignToReference>varR_JobCommissionUpdates.Actual_Commissionable__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>forT_JobCommissionable_Switch</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Determine_if_Commissionable_is_An_Exception</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Commissionable_Exception_Parameter</name>
        <label>Assign Commissionable Exception Parameter</label>
        <locationX>578</locationX>
        <locationY>998</locationY>
        <assignmentItems>
            <assignToReference>varR_JobCommissionUpdates.Exception_Commissionable__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Determine_if_Commissionable_is_An_Exception.varP_isException</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Deposit_First_Payment_Switch_Selected</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Deposit_First_Payment_Parameters</name>
        <label>Assign Deposit First Payment Parameters</label>
        <locationX>578</locationX>
        <locationY>1406</locationY>
        <assignmentItems>
            <assignToReference>varR_JobCommissionUpdates.Actual_DepositFirst_Payment_Met__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>forT_Deposit1stPay_Switch</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varR_JobCommissionUpdates.Actual_Deposit_1st_Payment_Incentive__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SetActualDepositFirstPaymentParameters.varN_ActualDeposit1stPayIncentivePer</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varR_JobCommissionUpdates.Exception_DepositFirst_Payment__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SetActualDepositFirstPaymentParameters.varP_ExceptionDepositFirstPayment</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Total_Collection_Switch_Selected</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Exception_Reason</name>
        <label>Assign Exception Reason</label>
        <locationX>710</locationX>
        <locationY>566</locationY>
        <assignmentItems>
            <assignToReference>varR_JobCommissionUpdates.Exception_Reason__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Exception_Reason</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Commissionable_Job_Switch_Selected</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Job_Commission_Calculations</name>
        <label>Assign Job Commission Calculations</label>
        <locationX>710</locationX>
        <locationY>2222</locationY>
        <assignmentItems>
            <assignToReference>varR_JobCommissionUpdates</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CalculateJobCommission.varR_JobCommission</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Change_Confirmation_Screen</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Total_Collection_Parameters_Quick</name>
        <label>Assign Total Collection Parameters Quick</label>
        <locationX>446</locationX>
        <locationY>1922</locationY>
        <assignmentItems>
            <assignToReference>varR_JobCommissionUpdates.Actual_Quick_Collection_Incentive__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SetActualTotalCollectionParameters_QuickThis.varN_ThisActualIncentivePercentage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varR_JobCommissionUpdates.Actual_Slow_Collection_Incentive__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SetActualTotalCollectionParameters_QuickThis.varN_ThatActualIncentivePercentage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varR_JobCommissionUpdates.Exception_Quick_Collection__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SetActualTotalCollectionParameters_QuickThis.varP_ThisException</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varR_JobCommissionUpdates.Exception_Slow_Collection__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SetActualTotalCollectionParameters_QuickThis.varP_ThatException</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varR_JobCommissionUpdates.Actual_Slow_Collection_Met__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SetActualTotalCollectionParameters_QuickThis.varP_ThatActualMet</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>CalculateJobCommission</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Total_Collection_Parameters_Slow</name>
        <label>Assign Total Collection Parameters Slow</label>
        <locationX>710</locationX>
        <locationY>1922</locationY>
        <assignmentItems>
            <assignToReference>varR_JobCommissionUpdates.Actual_Quick_Collection_Incentive__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SetActualTotalCollectionParameters_SlowThis.varN_ThatActualIncentivePercentage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varR_JobCommissionUpdates.Actual_Slow_Collection_Incentive__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SetActualTotalCollectionParameters_SlowThis.varN_ThisActualIncentivePercentage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varR_JobCommissionUpdates.Exception_Quick_Collection__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SetActualTotalCollectionParameters_SlowThis.varP_ThatException</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varR_JobCommissionUpdates.Exception_Slow_Collection__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SetActualTotalCollectionParameters_SlowThis.varP_ThisException</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varR_JobCommissionUpdates.Actual_Quick_Collection_Met__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SetActualTotalCollectionParameters_SlowThis.varP_ThatActualMet</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>CalculateJobCommission</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Copy_Job_Commission_Record</name>
        <label>Copy Job Commission Record</label>
        <locationX>380</locationX>
        <locationY>242</locationY>
        <assignmentItems>
            <assignToReference>varR_JobCommissionUpdates</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Job_Commissions_Record</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Welcome</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Make_Job_Commissions_Record_Equal_Copy</name>
        <label>Make Job Commissions Record Equal Copy</label>
        <locationX>314</locationX>
        <locationY>2546</locationY>
        <assignmentItems>
            <assignToReference>Get_Job_Commissions_Record</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varR_JobCommissionUpdates</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Job_Commission_Record</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Actual_Quick_Collection_Met_to_Yes</name>
        <label>Set Actual Quick Collection Met to Yes</label>
        <locationX>446</locationX>
        <locationY>1706</locationY>
        <assignmentItems>
            <assignToReference>varR_JobCommissionUpdates.Actual_Quick_Collection_Met__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Yes</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>SetActualTotalCollectionParameters_QuickThis</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Actual_Slow_Collection_Met_to_Yes</name>
        <label>Set Actual Slow Collection Met to Yes</label>
        <locationX>710</locationX>
        <locationY>1706</locationY>
        <assignmentItems>
            <assignToReference>varR_JobCommissionUpdates.Actual_Slow_Collection_Met__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Yes</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>SetActualTotalCollectionParameters_SlowThis</targetReference>
        </connector>
    </assignments>
    <choices>
        <name>AcceptOption</name>
        <choiceText>I accept these changes. Please update Job Commissions record.</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Accept</stringValue>
        </value>
    </choices>
    <choices>
        <name>Commissionable_Job_Switch</name>
        <choiceText>{!forT_JobCommissionable_ChoiceLabel}</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Commissionable Job Switch</stringValue>
        </value>
    </choices>
    <choices>
        <name>Deposit_First_Payment_Switch</name>
        <choiceText>{!forT_Deposit1stPay_ChoiceLabel}</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Deposit First Payment Switch</stringValue>
        </value>
    </choices>
    <choices>
        <name>ExitOption</name>
        <choiceText>I do not accept these changes. Please exit this process and return me to the Job Commissions record.</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Exit</stringValue>
        </value>
    </choices>
    <choices>
        <description>`</description>
        <name>QuickPaymentYes</name>
        <choiceText>{!forT_QuickCollectYes_ChoiceLabel}</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>QuickPaymentYes</stringValue>
        </value>
    </choices>
    <choices>
        <name>ResetOption</name>
        <choiceText>I do not accept these changes. Please reset my selections and start over.</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Reset</stringValue>
        </value>
    </choices>
    <choices>
        <name>SlowPaymentYes</name>
        <choiceText>{!forT_SlowCollectYes_ChoiceLabel}</choiceText>
        <dataType>String</dataType>
    </choices>
    <choices>
        <name>Total_Collection_Switch</name>
        <choiceText>{!forT_TotalCollection_ChoiceLabel}</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Total Collection Switch</stringValue>
        </value>
    </choices>
    <constants>
        <name>con_FlowName</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Job Commissions - Screen Flow - Exception Handling</stringValue>
        </value>
    </constants>
    <decisions>
        <name>Commissionable_Job_Switch_Selected</name>
        <label>Commissionable Job Switch Selected?</label>
        <locationX>710</locationX>
        <locationY>674</locationY>
        <defaultConnector>
            <targetReference>Deposit_First_Payment_Switch_Selected</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>CJS_No</defaultConnectorLabel>
        <rules>
            <name>CJS_Yes</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>CheckExceptions</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>Commissionable_Job_Switch</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>CheckExceptions2</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>Commissionable_Job_Switch</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Actual_Commissionable_Value</targetReference>
            </connector>
            <label>CJS_Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Deposit_First_Payment_Switch_Selected</name>
        <label>Deposit First Payment Switch Selected?</label>
        <locationX>710</locationX>
        <locationY>1190</locationY>
        <defaultConnector>
            <targetReference>Total_Collection_Switch_Selected</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>DFPS_No</defaultConnectorLabel>
        <rules>
            <name>DFPS_Yes</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>CheckExceptions</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>Deposit_First_Payment_Switch</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>CheckExceptions2</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>Deposit_First_Payment_Switch</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>SetActualDepositFirstPaymentParameters</targetReference>
            </connector>
            <label>DFPS_Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Next_Action_After_Confirmation</name>
        <label>Next Action After Confirmation?</label>
        <locationX>710</locationX>
        <locationY>2438</locationY>
        <defaultConnectorLabel>Exit</defaultConnectorLabel>
        <rules>
            <name>Accept</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Confirmation</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>AcceptOption</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Make_Job_Commissions_Record_Equal_Copy</targetReference>
            </connector>
            <label>Accept</label>
        </rules>
        <rules>
            <name>Reset</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Confirmation</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>ResetOption</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Copy_Job_Commission_Record</targetReference>
            </connector>
            <label>Reset</label>
        </rules>
    </decisions>
    <decisions>
        <name>Total_Collection_Switch_Selected</name>
        <label>Total Collection Switch Selected?</label>
        <locationX>710</locationX>
        <locationY>1598</locationY>
        <defaultConnector>
            <targetReference>CalculateJobCommission</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No_Change</defaultConnectorLabel>
        <rules>
            <name>Yes_Change_to_Quick</name>
            <conditionLogic>(1 AND 2) OR 3</conditionLogic>
            <conditions>
                <leftValueReference>CheckExceptions</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>Total_Collection_Switch</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varR_JobCommissionUpdates.Actual_Quick_Collection_Met__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>No</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>CheckExceptions2</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>QuickPaymentYes</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Actual_Quick_Collection_Met_to_Yes</targetReference>
            </connector>
            <label>Yes_Change_to_Quick</label>
        </rules>
        <rules>
            <name>Yes_Change_to_Slow</name>
            <conditionLogic>(1 AND 2) OR 3</conditionLogic>
            <conditions>
                <leftValueReference>varR_JobCommissionUpdates.Actual_Quick_Collection_Met__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Yes</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>CheckExceptions</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>Total_Collection_Switch</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>CheckExceptions2</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>SlowPaymentYes</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Actual_Slow_Collection_Met_to_Yes</targetReference>
            </connector>
            <label>Yes_Change_to_Slow</label>
        </rules>
    </decisions>
    <decisions>
        <name>Was_QuickCollectYes_and_SlowCollectYes_both_selected</name>
        <label>Was QuickCollectYes and SlowCollectYes both selected?</label>
        <locationX>380</locationX>
        <locationY>458</locationY>
        <defaultConnector>
            <targetReference>Assign_Exception_Reason</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Both_NO</defaultConnectorLabel>
        <rules>
            <name>Both_Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>CheckExceptions2</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>QuickPaymentYes</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>CheckExceptions2</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>SlowPaymentYes</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>QuickSlowYesError</targetReference>
            </connector>
            <label>Both_Yes</label>
        </rules>
    </decisions>
    <description>STAR-6133 STAR-6288 flow for managing job commission exceptions for use by Sales Ops:  commissionable, Quick/Slow Collection, First Deposit/FirstPayment</description>
    <environments>Default</environments>
    <formulas>
        <name>forC_BadDebt</name>
        <dataType>Currency</dataType>
        <expression>{!Get_Job_Commissions_Record.Job_Bad_Debt__c}</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <description>need for text</description>
        <name>forC_Deposit1stPayAmount_Orig</name>
        <dataType>Currency</dataType>
        <expression>{!Get_Job_Commissions_Record.Actual_DepositFirst_Payment_Amount__c}</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>forC_Deposit1stPayAmount_Update</name>
        <dataType>Currency</dataType>
        <expression>{!varR_JobCommissionUpdates.Actual_DepositFirst_Payment_Amount__c}</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>forC_QuickCollectAmount_Orig</name>
        <dataType>Currency</dataType>
        <expression>{!Get_Job_Commissions_Record.Actual_Quick_Collection_Payment_Amount__c}</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>forC_QuickCollectAmount_Update</name>
        <dataType>Currency</dataType>
        <expression>{!varR_JobCommissionUpdates.Actual_Quick_Collection_Payment_Amount__c}</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>forC_ROMContractedSales</name>
        <dataType>Currency</dataType>
        <expression>{!Get_Job_Commissions_Record.Job_Amount__c}</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>forC_SlowCollectAmount_Orig</name>
        <dataType>Currency</dataType>
        <expression>{!Get_Job_Commissions_Record.Actual_Slow_Collection_Payment_Amount__c}</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>forC_SlowCollectAmount_Update</name>
        <dataType>Currency</dataType>
        <expression>{!varR_JobCommissionUpdates.Actual_Slow_Collection_Payment_Amount__c}</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>forC_TotalCommissionAmount_Change</name>
        <dataType>Currency</dataType>
        <expression>{!forC_TotalCommissionAmount_Update} - {!forC_TotalCommissionAmount_Orig}</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>forC_TotalCommissionAmount_Orig</name>
        <dataType>Currency</dataType>
        <expression>{!Get_Job_Commissions_Record.Actual_Total_Commission_Payment_Amount__c}</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>forC_TotalCommissionAmount_Update</name>
        <dataType>Currency</dataType>
        <expression>{!varR_JobCommissionUpdates.Actual_Total_Commission_Payment_Amount__c}</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>forC_TotalCommissionPool</name>
        <dataType>Currency</dataType>
        <expression>{!Get_Job_Commissions_Record.Job_Amount__c} * {!Get_Job_Commissions_Record.Split_Multiplier__c}</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>forN_AxtualCommissionableSwitch</name>
        <dataType>Number</dataType>
        <expression>IF(TEXT({!varR_JobCommissionUpdates.Actual_Commissionable__c})=&quot;Yes&quot;,1,0)</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>forN_Deposit1stPayIncentive</name>
        <dataType>Number</dataType>
        <expression>{!Get_Job_Commissions_Record.Deposit_First_Payment_Incentive__c}</expression>
        <scale>4</scale>
    </formulas>
    <formulas>
        <name>forN_Deposit1stPayPercent_Orig</name>
        <dataType>Number</dataType>
        <expression>{!Get_Job_Commissions_Record.Actual_Deposit_1st_Payment_Incentive__c}</expression>
        <scale>4</scale>
    </formulas>
    <formulas>
        <name>forN_Deposit1stPayPercent_Update</name>
        <dataType>Number</dataType>
        <expression>{!varR_JobCommissionUpdates.Actual_Deposit_1st_Payment_Incentive__c}</expression>
        <scale>4</scale>
    </formulas>
    <formulas>
        <name>forN_Margin</name>
        <dataType>Number</dataType>
        <expression>{!Get_Job_Commissions_Record.Job_Margin__c}</expression>
        <scale>4</scale>
    </formulas>
    <formulas>
        <name>forN_QuickCollectionIncentive</name>
        <dataType>Number</dataType>
        <expression>{!Get_Job_Commissions_Record.Quick_Collection_Incentive__c}</expression>
        <scale>4</scale>
    </formulas>
    <formulas>
        <name>forN_QuickCollectPercent_Orig</name>
        <dataType>Number</dataType>
        <expression>{!Get_Job_Commissions_Record.Actual_Quick_Collection_Incentive__c}</expression>
        <scale>4</scale>
    </formulas>
    <formulas>
        <name>forN_QuickCollectPercent_Update</name>
        <dataType>Number</dataType>
        <expression>{!varR_JobCommissionUpdates.Actual_Quick_Collection_Incentive__c}</expression>
        <scale>4</scale>
    </formulas>
    <formulas>
        <name>forN_SlowCollectionIncentive</name>
        <dataType>Number</dataType>
        <expression>{!Get_Job_Commissions_Record.Slow_Collection_Incentive__c}</expression>
        <scale>4</scale>
    </formulas>
    <formulas>
        <name>forN_SlowCollectPercent_Orig</name>
        <dataType>Number</dataType>
        <expression>{!Get_Job_Commissions_Record.Actual_Slow_Collection_Incentive__c}</expression>
        <scale>4</scale>
    </formulas>
    <formulas>
        <name>forN_SlowCollectPercent_Update</name>
        <dataType>Number</dataType>
        <expression>{!varR_JobCommissionUpdates.Actual_Slow_Collection_Incentive__c}</expression>
        <scale>4</scale>
    </formulas>
    <formulas>
        <name>forT_CommissionableException</name>
        <dataType>String</dataType>
        <expression>IF(TEXT({!varR_JobCommissionUpdates.Actual_Commissionable__c})= TEXT({!varR_JobCommissionUpdates.Default_Commissionable__c}),&quot;No&quot;,&quot;Yes&quot;)</expression>
    </formulas>
    <formulas>
        <name>forT_Deposit1stPay_ChoiceLabel</name>
        <dataType>String</dataType>
        <expression>IF(
  TEXT({!varR_JobCommissionUpdates.Actual_DepositFirst_Payment_Met__c})=&quot;No&quot;,
  &quot;Change the Deposit/First Payment incentive earned from No to Yes&quot;,
  &quot;Change the Deposit/First Payment incentive earned from Yes to No&quot;
)</expression>
    </formulas>
    <formulas>
        <name>forT_Deposit1stPay_Switch</name>
        <dataType>String</dataType>
        <expression>If(TEXT({!varR_JobCommissionUpdates.Actual_DepositFirst_Payment_Met__c})=&quot;No&quot;,&quot;Yes&quot;,&quot;No&quot;)</expression>
    </formulas>
    <formulas>
        <name>forT_JobCommissionable_ChoiceLabel</name>
        <dataType>String</dataType>
        <expression>IF(
  TEXT({!varR_JobCommissionUpdates.Actual_Commissionable__c}) =&quot;Yes&quot;,
  &quot;Change the Job to Non-Commissionable&quot;,
  &quot;Change the Job to Commissionable&quot;
)</expression>
    </formulas>
    <formulas>
        <name>forT_JobCommissionable_Switch</name>
        <dataType>String</dataType>
        <expression>If(TEXT({!varR_JobCommissionUpdates.Actual_Commissionable__c})=&quot;Yes&quot;,&quot;No&quot;,&quot;Yes&quot;)</expression>
    </formulas>
    <formulas>
        <name>forT_QuickCollectYes_ChoiceLabel</name>
        <dataType>String</dataType>
        <expression>&quot;Change the Quick Collection incentive earned from No to Yes&quot;</expression>
    </formulas>
    <formulas>
        <name>forT_SlowCollectYes_ChoiceLabel</name>
        <dataType>String</dataType>
        <expression>&quot;Change the Slow Collection incentive earned from No to Yes&quot;</expression>
    </formulas>
    <formulas>
        <name>forT_TotalCollection_ChoiceLabel</name>
        <dataType>String</dataType>
        <expression>If (
  AND(
    TEXT({!varR_JobCommissionUpdates.Actual_Quick_Collection_Met__c}) = &quot;No&quot;,
    TEXT({!varR_JobCommissionUpdates.Actual_Slow_Collection_Met__c}) = &quot;Yes&quot;
  ),
  &quot;Change the Total Collection incentive earned from Slow Collection to Quick Collection&quot;,
If (
  AND(
    TEXT({!varR_JobCommissionUpdates.Actual_Quick_Collection_Met__c}) = &quot;Yes&quot;,
    TEXT({!varR_JobCommissionUpdates.Actual_Slow_Collection_Met__c}) = &quot;No&quot;
  ),
  &quot;Change the Total Collection incentive earned from Quick Collection to Slow Collection&quot;,
  &quot;Please send ticket to ithelp@firstonsite.com with Salesforce in the subject and state Job number and error - all met are nos&quot;
)
)</expression>
    </formulas>
    <interviewLabel>Job Commissions - {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Job Commissions - Screen Flow - Exception Handling</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordLookups>
        <name>Get_Job_Commissions_Record</name>
        <label>Get Job Commissions Record</label>
        <locationX>380</locationX>
        <locationY>134</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Copy_Job_Commission_Record</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Job_Commission__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_Job_Commission_Record</name>
        <label>Update Job Commission Record</label>
        <locationX>314</locationX>
        <locationY>2654</locationY>
        <faultConnector>
            <targetReference>Post_Sales_Incentive_Plan_Error_BoltEvents</targetReference>
        </faultConnector>
        <inputReference>Get_Job_Commissions_Record</inputReference>
    </recordUpdates>
    <screens>
        <name>Change_Confirmation_Screen</name>
        <label>Change Confirmation Screen</label>
        <locationX>710</locationX>
        <locationY>2330</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Next_Action_After_Confirmation</targetReference>
        </connector>
        <fields>
            <name>Unchangeable_Commission_Components2</name>
            <fieldText>Unchangeable Commission Components</fieldText>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>Unchangeable_Commission_Components2_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>JobDetails2</name>
                    <fieldText>&lt;p&gt;Job Number: &lt;strong&gt;{!Get_Job_Commissions_Record.Job__r.WorkOrderNumber}&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Job Name: &lt;strong&gt;{!Get_Job_Commissions_Record.Job__r.Job_Name__c}&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Account: &lt;strong&gt;{!Get_Job_Commissions_Record.Job__r.Account.Name}&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;BD Account Managers: &lt;strong&gt;{!Get_Job_Commissions_Record.Job__r.BD_Concat__c}&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;In Legal? &lt;strong&gt;{!Get_Job_Commissions_Record.Job_In_Legal__c}; &lt;/strong&gt;In Collections? &lt;strong&gt;{!Get_Job_Commissions_Record.Job_In_Collections__c}&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Has Bad Debt? &lt;strong&gt;{!Get_Job_Commissions_Record.Has_Bad_Debt__c}; &lt;/strong&gt;House Account? &lt;strong&gt;{!Get_Job_Commissions_Record.House_Account__c}&lt;/strong&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>4</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>Unchangeable_Commission_Components2_Column2</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>CommissionPool2</name>
                    <fieldText>&lt;p&gt;The ROM Contracted Sales is &lt;strong&gt;{!forC_ROMContractedSales}&lt;/strong&gt;. Because there are &lt;strong&gt;{!Get_Job_Commissions_Record.Number_of_Commissionable_Employees__c} &lt;/strong&gt;Commissionable Employees on this Job, it has a Split Multiplier of &lt;strong&gt;{!Get_Job_Commissions_Record.Split_Multiplier__c}&lt;/strong&gt; and therefore the amount the pool the incentives calculate from is &lt;strong&gt;{!forC_TotalCommissionPool}&lt;/strong&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>4</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>Unchangeable_Commission_Components2_Column3</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>MarginPercents2</name>
                    <fieldText>&lt;p&gt;The Margin on this Job is &lt;strong&gt;{!forN_Margin}% &lt;/strong&gt;which puts it at a &lt;strong&gt;{!Get_Job_Commissions_Record.Margin_Tier__c} &lt;/strong&gt;Commission. As such, the Incentive Percentages are set as follows:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Deposit/First Payment - &lt;strong&gt;{!forN_Deposit1stPayIncentive}%&lt;/strong&gt;&lt;/li&gt;&lt;li&gt;Quick Collection - &lt;strong&gt;{!forN_QuickCollectionIncentive}%&lt;/strong&gt;&lt;/li&gt;&lt;li&gt;Slow Collection - &lt;strong&gt;{!forN_SlowCollectionIncentive}%&lt;/strong&gt;&lt;/li&gt;&lt;/ul&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>4</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithHeader</regionContainerType>
        </fields>
        <fields>
            <name>Change_Results_and_Confirmation</name>
            <fieldText>Change Results and Confirmation</fieldText>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>Change_Results_and_Confirmation_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>BeforeLabels</name>
                    <fieldText>&lt;p&gt;&lt;strong&gt;&lt;u&gt;Field Name:&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(68, 68, 68);&quot;&gt;Actual Commissionable?&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12px; background-color: rgb(255, 255, 255);&quot;&gt;Actual Deposit/First Payment Met?&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12px; background-color: rgb(255, 255, 255);&quot;&gt;Actual Deposit/1st Payment Incentive %&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12px; background-color: rgb(255, 255, 255);&quot;&gt;Actual Deposit/First Payment Amount&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12px; background-color: rgb(255, 255, 255);&quot;&gt;﻿Exception - Deposit/First Payment?&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(68, 68, 68); font-size: 12px; background-color: rgb(255, 255, 255);&quot;&gt;Actual Quick Collection Met?&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(68, 68, 68); font-size: 12px; background-color: rgb(255, 255, 255);&quot;&gt;Actual Quick Collection Incentive %&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(68, 68, 68); font-size: 12px; background-color: rgb(255, 255, 255);&quot;&gt;Actual Quick Collection Payment Amount&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(68, 68, 68); font-size: 12px; background-color: rgb(255, 255, 255);&quot;&gt;Exception - Quick Collection?&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(68, 68, 68); font-size: 12px; background-color: rgb(255, 255, 255);&quot;&gt;Actual Slow Collection Met?&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(68, 68, 68); font-size: 12px; background-color: rgb(255, 255, 255);&quot;&gt;Actual Slow Collection Incentive %&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(68, 68, 68); font-size: 12px; background-color: rgb(255, 255, 255);&quot;&gt;Actual Slow Collection Payment Amount&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(68, 68, 68); font-size: 12px; background-color: rgb(255, 255, 255);&quot;&gt;﻿Exception - Slow Collection?&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(68, 68, 68); font-size: 12px; background-color: rgb(255, 255, 255);&quot;&gt;Actual Total Commission Payment Amount&lt;/span&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>4</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>Change_Results_and_Confirmation_Column2</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>BeforeValues</name>
                    <fieldText>&lt;p&gt;&lt;strong&gt;&lt;u&gt;Before Changes:&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;{!Get_Job_Commissions_Record.Actual_Commissionable__c}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;{!Get_Job_Commissions_Record.Actual_DepositFirst_Payment_Met__c}&lt;/p&gt;&lt;p&gt;{!forN_Deposit1stPayPercent_Orig}%&lt;/p&gt;&lt;p&gt;{!forC_Deposit1stPayAmount_Orig}&lt;/p&gt;&lt;p&gt;{!Get_Job_Commissions_Record.Exception_DepositFirst_Payment__c}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;{!Get_Job_Commissions_Record.Actual_Quick_Collection_Met__c}&lt;/p&gt;&lt;p&gt;{!forN_QuickCollectPercent_Orig}%&lt;/p&gt;&lt;p&gt;{!forC_QuickCollectAmount_Orig}&lt;/p&gt;&lt;p&gt;{!Get_Job_Commissions_Record.Exception_Quick_Collection__c}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;{!Get_Job_Commissions_Record.Actual_Slow_Collection_Met__c}&lt;/p&gt;&lt;p&gt;{!forN_SlowCollectPercent_Orig}%&lt;/p&gt;&lt;p&gt;{!forC_SlowCollectAmount_Orig}&lt;/p&gt;&lt;p&gt;{!Get_Job_Commissions_Record.Exception_Slow_Collection__c}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;{!forC_TotalCommissionAmount_Orig}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>2</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>Change_Results_and_Confirmation_Column3</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>AfterText</name>
                    <fieldText>&lt;p&gt;&lt;strong&gt;&lt;u&gt;After Changes:&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;{!varR_JobCommissionUpdates.Actual_Commissionable__c}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;{!varR_JobCommissionUpdates.Actual_DepositFirst_Payment_Met__c}&lt;/p&gt;&lt;p&gt;{!forN_Deposit1stPayPercent_Update}%&lt;/p&gt;&lt;p&gt;{!forC_Deposit1stPayAmount_Update}&lt;/p&gt;&lt;p&gt;{!varR_JobCommissionUpdates.Exception_DepositFirst_Payment__c}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;{!varR_JobCommissionUpdates.Actual_Quick_Collection_Met__c}&lt;/p&gt;&lt;p&gt;{!forN_QuickCollectPercent_Update}%&lt;/p&gt;&lt;p&gt;{!forC_QuickCollectAmount_Update}&lt;/p&gt;&lt;p&gt;{!varR_JobCommissionUpdates.Exception_Quick_Collection__c}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;{!varR_JobCommissionUpdates.Actual_Slow_Collection_Met__c}&lt;/p&gt;&lt;p&gt;{!forN_SlowCollectPercent_Update}%&lt;/p&gt;&lt;p&gt;{!forC_SlowCollectAmount_Update}&lt;/p&gt;&lt;p&gt;{!varR_JobCommissionUpdates.Exception_Slow_Collection__c}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;{!forC_TotalCommissionAmount_Update}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>2</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>Change_Results_and_Confirmation_Column4</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>TotalChangeLabel</name>
                    <fieldText>&lt;p&gt;&lt;strong style=&quot;font-size: 14px;&quot;&gt;&lt;u&gt;Total Commissions Amount Change:&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>TotalChnagePositive</name>
                    <fieldText>&lt;p&gt;&lt;strong style=&quot;color: rgb(43, 169, 70); font-size: 20px;&quot;&gt;{!forC_TotalCommissionAmount_Change}&lt;/strong&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                    <visibilityRule>
                        <conditionLogic>and</conditionLogic>
                        <conditions>
                            <leftValueReference>forC_TotalCommissionAmount_Change</leftValueReference>
                            <operator>GreaterThanOrEqualTo</operator>
                            <rightValue>
                                <numberValue>0.0</numberValue>
                            </rightValue>
                        </conditions>
                    </visibilityRule>
                </fields>
                <fields>
                    <name>TotalChangeNegative</name>
                    <fieldText>&lt;p&gt;&lt;strong style=&quot;font-size: 20px; color: rgb(238, 29, 29);&quot;&gt;{!forC_TotalCommissionAmount_Change}&lt;/strong&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                    <visibilityRule>
                        <conditionLogic>and</conditionLogic>
                        <conditions>
                            <leftValueReference>forC_TotalCommissionAmount_Change</leftValueReference>
                            <operator>LessThan</operator>
                            <rightValue>
                                <numberValue>0.0</numberValue>
                            </rightValue>
                        </conditions>
                    </visibilityRule>
                </fields>
                <fields>
                    <name>Confirmation</name>
                    <choiceReferences>AcceptOption</choiceReferences>
                    <choiceReferences>ResetOption</choiceReferences>
                    <choiceReferences>ExitOption</choiceReferences>
                    <dataType>String</dataType>
                    <fieldText>Confirmation</fieldText>
                    <fieldType>RadioButtons</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>4</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithHeader</regionContainerType>
        </fields>
        <fields>
            <name>ExceptionReason</name>
            <fieldText>&lt;p&gt;&lt;strong&gt;Exception Reason: &lt;/strong&gt;{!varR_JobCommissionUpdates.Exception_Reason__c}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>Continue</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>QuickSlowYesError</name>
        <label>QuickSlowYesError</label>
        <locationX>50</locationX>
        <locationY>566</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Welcome</targetReference>
        </connector>
        <fields>
            <name>QuickSLowYesErrorMessage</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;color: rgb(253, 6, 6); font-size: 16px;&quot;&gt;You may not give both a Slow and Quick Collection incentive. Please choose one or the other, but not both.&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>Return to Selection Screen</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Welcome</name>
        <label>Welcome</label>
        <locationX>380</locationX>
        <locationY>350</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Was_QuickCollectYes_and_SlowCollectYes_both_selected</targetReference>
        </connector>
        <fields>
            <name>Unchangeable_Commission_Components1</name>
            <fieldText>Unchangeable Commission Components</fieldText>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>Unchangeable_Commission_Components1_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>JobDetails1</name>
                    <fieldText>&lt;p&gt;Job Number: &lt;strong&gt;{!Get_Job_Commissions_Record.Job__r.WorkOrderNumber}&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Job Name: &lt;strong&gt;{!Get_Job_Commissions_Record.Job__r.Job_Name__c}&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Account: &lt;strong&gt;{!Get_Job_Commissions_Record.Job__r.Account.Name}&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;BD Account Managers: &lt;strong&gt;{!Get_Job_Commissions_Record.Job__r.BD_Concat__c}&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;In Legal? &lt;strong&gt;{!Get_Job_Commissions_Record.Job_In_Legal__c}; &lt;/strong&gt;In Collections? &lt;strong&gt;{!Get_Job_Commissions_Record.Job_In_Collections__c}&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Has Bad Debt? &lt;strong&gt;{!Get_Job_Commissions_Record.Has_Bad_Debt__c}; &lt;/strong&gt;House Account? &lt;strong&gt;{!Get_Job_Commissions_Record.House_Account__c}&lt;/strong&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>4</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>Unchangeable_Commission_Components1_Column2</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>CommissionPool1</name>
                    <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt;The ROM Contracted Sales is &lt;/span&gt;&lt;strong style=&quot;background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt;{!forC_ROMContractedSales}&lt;/strong&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt;. Because there are &lt;/span&gt;&lt;strong style=&quot;background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt;{!Get_Job_Commissions_Record.Number_of_Commissionable_Employees__c} &lt;/strong&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt;Commissionable Employees on this Job, it has a Split Multiplier of &lt;/span&gt;&lt;strong style=&quot;background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt;{!Get_Job_Commissions_Record.Split_Multiplier__c}&lt;/strong&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt; and therefore the amount the pool the incentives calculate from is &lt;/span&gt;&lt;strong style=&quot;background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt;{!forC_TotalCommissionPool}&lt;/strong&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>4</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>Unchangeable_Commission_Components1_Column3</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>MarginPercents1</name>
                    <fieldText>&lt;p&gt;The Margin on this Job is &lt;strong&gt;{!forN_Margin}% &lt;/strong&gt;which puts it at a &lt;strong&gt;{!Get_Job_Commissions_Record.Margin_Tier__c} &lt;/strong&gt;Commission. As such, the Incentive Percentages are set as follows:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Deposit/First Payment - &lt;strong&gt;{!forN_Deposit1stPayIncentive}%&lt;/strong&gt;&lt;/li&gt;&lt;li&gt;Quick Collection - &lt;strong&gt;{!forN_QuickCollectionIncentive}%&lt;/strong&gt;&lt;/li&gt;&lt;li&gt;Slow Collection - &lt;strong&gt;{!forN_SlowCollectionIncentive}%&lt;/strong&gt;&lt;/li&gt;&lt;/ul&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>4</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithHeader</regionContainerType>
        </fields>
        <fields>
            <name>Current_Job_Commission</name>
            <fieldText>Current Job  Commission</fieldText>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>Current_Job_Commission_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>CurrentJobCommDetails</name>
                    <fieldText>&lt;p&gt;&lt;strong style=&quot;font-size: 14px;&quot;&gt;&lt;u&gt;Incentive:&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Deposit/First Payment&lt;/p&gt;&lt;p&gt;Quick Collection&lt;/p&gt;&lt;p&gt;Slow Collection&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt;Job Commissionable&lt;/span&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>3</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>Current_Job_Commission_Column2</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Met</name>
                    <fieldText>&lt;p&gt;&lt;strong style=&quot;font-size: 14px;&quot;&gt;&lt;u&gt;Met:&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;{!Get_Job_Commissions_Record.Actual_DepositFirst_Payment_Met__c}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;{!Get_Job_Commissions_Record.Actual_Quick_Collection_Met__c}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;{!Get_Job_Commissions_Record.Actual_Slow_Collection_Met__c}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt;&lt;span class=&quot;ql-cursor&quot;&gt;﻿&lt;/span&gt;{!Get_Job_Commissions_Record.Actual_Commissionable__c}&lt;/span&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>2</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>Current_Job_Commission_Column3</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Amount</name>
                    <fieldText>&lt;p&gt;&lt;strong style=&quot;font-size: 14px;&quot;&gt;&lt;u&gt;Earned:&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;{!forC_Deposit1stPayAmount_Orig}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;{!forC_QuickCollectAmount_Orig}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;{!forC_SlowCollectAmount_Orig}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt;&lt;span class=&quot;ql-cursor&quot;&gt;﻿&lt;/span&gt;{!forC_TotalCommissionAmount_Orig}&lt;/span&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>2</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>Current_Job_Commission_Column4</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Exception</name>
                    <fieldText>&lt;p&gt;&lt;strong style=&quot;font-size: 14px;&quot;&gt;&lt;u&gt;Exception?&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;{!Get_Job_Commissions_Record.Exception_DepositFirst_Payment__c}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;{!Get_Job_Commissions_Record.Exception_Quick_Collection__c}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;{!varR_JobCommissionUpdates.Exception_Slow_Collection__c}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt;&lt;span class=&quot;ql-cursor&quot;&gt;﻿&lt;/span&gt;{!Get_Job_Commissions_Record.Exception_Commissionable__c}&lt;/span&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>5</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithHeader</regionContainerType>
        </fields>
        <fields>
            <name>Exception_Selection</name>
            <fieldText>Exception Selection</fieldText>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>Exception_Selection_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>CheckExceptions</name>
                    <choiceReferences>Deposit_First_Payment_Switch</choiceReferences>
                    <choiceReferences>Total_Collection_Switch</choiceReferences>
                    <choiceReferences>Commissionable_Job_Switch</choiceReferences>
                    <dataType>String</dataType>
                    <fieldText>Please select the exception(s) you wish to process:</fieldText>
                    <fieldType>MultiSelectCheckboxes</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>false</isRequired>
                    <visibilityRule>
                        <conditionLogic>NOT(1 AND 2)</conditionLogic>
                        <conditions>
                            <leftValueReference>Get_Job_Commissions_Record.Actual_Quick_Collection_Met__c</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <stringValue>No</stringValue>
                            </rightValue>
                        </conditions>
                        <conditions>
                            <leftValueReference>Get_Job_Commissions_Record.Actual_Slow_Collection_Met__c</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <stringValue>No</stringValue>
                            </rightValue>
                        </conditions>
                    </visibilityRule>
                </fields>
                <fields>
                    <name>CheckExceptions2</name>
                    <choiceReferences>Deposit_First_Payment_Switch</choiceReferences>
                    <choiceReferences>QuickPaymentYes</choiceReferences>
                    <choiceReferences>SlowPaymentYes</choiceReferences>
                    <choiceReferences>Commissionable_Job_Switch</choiceReferences>
                    <dataType>String</dataType>
                    <fieldText>Please select the exception(s) you wish to process:</fieldText>
                    <fieldType>MultiSelectCheckboxes</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>false</isRequired>
                    <visibilityRule>
                        <conditionLogic>and</conditionLogic>
                        <conditions>
                            <leftValueReference>Get_Job_Commissions_Record.Actual_Quick_Collection_Met__c</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <stringValue>No</stringValue>
                            </rightValue>
                        </conditions>
                        <conditions>
                            <leftValueReference>Get_Job_Commissions_Record.Actual_Slow_Collection_Met__c</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <stringValue>No</stringValue>
                            </rightValue>
                        </conditions>
                    </visibilityRule>
                </fields>
                <fields>
                    <name>Exception_Reason</name>
                    <dataType>String</dataType>
                    <fieldText>Exception Reason</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>12</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithHeader</regionContainerType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <start>
        <locationX>254</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Get_Job_Commissions_Record</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <subflows>
        <name>CalculateJobCommission</name>
        <label>CalculateJobCommission</label>
        <locationX>710</locationX>
        <locationY>2114</locationY>
        <connector>
            <targetReference>Assign_Job_Commission_Calculations</targetReference>
        </connector>
        <flowName>JobCommissionCal_Subflow_CalculateJobCommission</flowName>
        <inputAssignments>
            <name>varR_JobCommission</name>
            <value>
                <elementReference>varR_JobCommissionUpdates</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Determine_if_Commissionable_is_An_Exception</name>
        <label>Determine if Commissionable is An Exception</label>
        <locationX>578</locationX>
        <locationY>890</locationY>
        <connector>
            <targetReference>Assign_Commissionable_Exception_Parameter</targetReference>
        </connector>
        <flowName>JobCommissionCal_SubFlow_DetermineException</flowName>
        <inputAssignments>
            <name>varP_isActualMet</name>
            <value>
                <elementReference>varR_JobCommissionUpdates.Actual_Commissionable__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varP_isDefaultMet</name>
            <value>
                <elementReference>varR_JobCommissionUpdates.Default_Commissionable__c</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Post_Sales_Incentive_Plan_Error_BoltEvents</name>
        <label>Post Sales Incentive Plan Error BoltEvents</label>
        <locationX>578</locationX>
        <locationY>2762</locationY>
        <flowName>Bolt_Event_Subflow_Post_Sales_Incentive_Plan_Error_BoltEvents</flowName>
        <inputAssignments>
            <name>varT_Flow</name>
            <value>
                <elementReference>con_FlowName</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varT_Id</name>
            <value>
                <elementReference>Get_Job_Commissions_Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varT_ObjectName</name>
            <value>
                <stringValue>Job_Commission__c</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varT_StatusMessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <subflows>
        <name>SetActualDepositFirstPaymentParameters</name>
        <label>SetActualDepositFirstPaymentParameters</label>
        <locationX>578</locationX>
        <locationY>1298</locationY>
        <connector>
            <targetReference>Assign_Deposit_First_Payment_Parameters</targetReference>
        </connector>
        <flowName>JobCommissionCal_Subflow_SetActualDepositFirstPaymentParameters</flowName>
        <inputAssignments>
            <name>varN_Deposit1stPayIncentivePercent</name>
            <value>
                <elementReference>varR_JobCommissionUpdates.Deposit_First_Payment_Incentive__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varP_ActualDeposit1stPaymentMet</name>
            <value>
                <elementReference>forT_Deposit1stPay_Switch</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varP_DefaultDeposit1stPaymentMet</name>
            <value>
                <elementReference>varR_JobCommissionUpdates.Default_DepositFirst_Payment_Met__c</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>SetActualTotalCollectionParameters_QuickThis</name>
        <label>SetActualTotalCollectionParameters-QuickThis</label>
        <locationX>446</locationX>
        <locationY>1814</locationY>
        <connector>
            <targetReference>Assign_Total_Collection_Parameters_Quick</targetReference>
        </connector>
        <flowName>JobCommissionCal_Subflow_SetActualTotalCollectionParameters</flowName>
        <inputAssignments>
            <name>varN_ThatActualIncentivePercentage</name>
            <value>
                <elementReference>varR_JobCommissionUpdates.Actual_Slow_Collection_Incentive__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varN_ThisIncentivePercentage</name>
            <value>
                <elementReference>varR_JobCommissionUpdates.Quick_Collection_Incentive__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varP_ThatActualMet</name>
            <value>
                <elementReference>varR_JobCommissionUpdates.Actual_Slow_Collection_Met__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varP_ThatDefaultMet</name>
            <value>
                <elementReference>varR_JobCommissionUpdates.Default_Slow_Collection_Met__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varP_ThisActualMet</name>
            <value>
                <elementReference>varR_JobCommissionUpdates.Actual_Quick_Collection_Met__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varP_ThisDefaultMet</name>
            <value>
                <elementReference>varR_JobCommissionUpdates.Default_Quick_Collection_Met__c</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>SetActualTotalCollectionParameters_SlowThis</name>
        <label>SetActualTotalCollectionParameters-SlowThis</label>
        <locationX>710</locationX>
        <locationY>1814</locationY>
        <connector>
            <targetReference>Assign_Total_Collection_Parameters_Slow</targetReference>
        </connector>
        <flowName>JobCommissionCal_Subflow_SetActualTotalCollectionParameters</flowName>
        <inputAssignments>
            <name>varN_ThatActualIncentivePercentage</name>
            <value>
                <elementReference>varR_JobCommissionUpdates.Actual_Quick_Collection_Incentive__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varN_ThisIncentivePercentage</name>
            <value>
                <elementReference>varR_JobCommissionUpdates.Slow_Collection_Incentive__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varP_ThatActualMet</name>
            <value>
                <elementReference>varR_JobCommissionUpdates.Actual_Quick_Collection_Met__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varP_ThatDefaultMet</name>
            <value>
                <elementReference>varR_JobCommissionUpdates.Default_Quick_Collection_Met__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varP_ThisActualMet</name>
            <value>
                <elementReference>varR_JobCommissionUpdates.Actual_Slow_Collection_Met__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varP_ThisDefaultMet</name>
            <value>
                <elementReference>varR_JobCommissionUpdates.Default_Slow_Collection_Met__c</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <textTemplates>
        <name>TotalCollectionChoices</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>direct {!Get_Job_Commissions_Record.Actual_DepositFirst_Payment_Amount__c}
formula {!forC_Deposit1stPayAmount_Orig}

QC-Y, SC-N, CJ-Y
change QC to No and SC to Yes
make job NC
QC-N, SC-N, CJ-Y

change QC to Yes
change SC to Yes
QC-N, SC-Y, CJ-Y
change QC to Yes and SC to No
make job NC
QC-N, SC-N, CJ-N
make job commissionable and change QC to Yes
make job commissdionchange SC to Yes</text>
    </textTemplates>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varR_JobCommissionUpdates</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <objectType>Job_Commission__c</objectType>
    </variables>
</Flow>
