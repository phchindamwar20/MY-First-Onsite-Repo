<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>59.0</apiVersion>
    <assignments>
        <name>Default_Criteria_Met</name>
        <label>Default Criteria Met</label>
        <locationX>50</locationX>
        <locationY>350</locationY>
        <assignmentItems>
            <assignToReference>varP_DefaultDepositFirstPaymentMet</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>con_Yes</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varN_DefaultDepositFirstPayIncentivePer</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varN_Deposit1stPaymentIncentivePercent</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Deposit_First_Payment_Criteria_Not_Met</name>
        <label>Deposit First Payment Criteria Not Met</label>
        <locationX>578</locationX>
        <locationY>242</locationY>
        <assignmentItems>
            <assignToReference>varP_DefaultDepositFirstPaymentMet</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>con_No</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varN_DefaultDepositFirstPayIncentivePer</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
    </assignments>
    <constants>
        <name>con_No</name>
        <dataType>String</dataType>
        <value>
            <stringValue>No</stringValue>
        </value>
    </constants>
    <constants>
        <description>Yes</description>
        <name>con_Yes</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Yes</stringValue>
        </value>
    </constants>
    <decisions>
        <name>Default_Deposit_1st_Payment_Criteria_Met</name>
        <label>Default Deposit 1st Payment Criteria Met?</label>
        <locationX>182</locationX>
        <locationY>242</locationY>
        <defaultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Deposit_First_Payment_Criteria_Not_Met</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Criteria Not Met</defaultConnectorLabel>
        <rules>
            <name>Criteria_Met</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>forN_DaysBetweenStartAndFirstPayment</leftValueReference>
                <operator>LessThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>varN_Deposit1stPaymentIncentiveThreshold</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varC_JobDepositFirstPaymentAmount</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Default_Criteria_Met</targetReference>
            </connector>
            <label>Criteria Met</label>
        </rules>
    </decisions>
    <decisions>
        <name>Has_Start_and_Deposit_First_Payment_Dates_and_Payment</name>
        <label>Has Start and Deposit First Payment Dates and Payment?</label>
        <locationX>380</locationX>
        <locationY>134</locationY>
        <defaultConnector>
            <targetReference>Deposit_First_Payment_Criteria_Not_Met</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varD_JobStartDate</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varD_JobDateOfDepositFirstPayment</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varC_JobDepositFirstPaymentAmount</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Default_Deposit_1st_Payment_Criteria_Met</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <description>STAR-5564, STAR-5498, STAR-6133 Determines if the Default Deposit First Payment Criteria Met and sets the Default Deposit First Payment Incentive Percentage</description>
    <environments>Default</environments>
    <formulas>
        <description>Job First Payment Date - Job Start Date</description>
        <name>forN_DaysBetweenStartAndFirstPayment</name>
        <dataType>Number</dataType>
        <expression>{!varD_JobDateOfDepositFirstPayment} - {!varD_JobStartDate}</expression>
        <scale>0</scale>
    </formulas>
    <interviewLabel>JobCommissionCal-Subflow-DefaultDepositFirstPaymentMet? {!$Flow.CurrentDateTime}</interviewLabel>
    <label>JobCommissionCal-Subflow-DefaultDepositFirstPaymentMet?</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <start>
        <locationX>254</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Has_Start_and_Deposit_First_Payment_Dates_and_Payment</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <description>This is the first payment amount collected on the job.  It is utilized to calculate the eligibility for Quick First Payment or Slow First Payment eligibility.</description>
        <name>varC_JobDepositFirstPaymentAmount</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <description>This is the date First Onsite received the first payment from the customer.  It is utilized to calculate if the job commission meets the requirement for a Quick First Payment or Slow First Payment commission.</description>
        <name>varD_JobDateOfDepositFirstPayment</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>The start date of a job used to calculate the Quick First Payment or Slow First Payment eligibility</description>
        <name>varD_JobStartDate</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>This is the default percent parameter of the Job Amount to collect, if Job Commission is eligible for Quick First Payment commission based on the Job Tier.  This is NOT adjustable.</description>
        <name>varN_DefaultDepositFirstPayIncentivePer</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <scale>4</scale>
    </variables>
    <variables>
        <description>Not visible to users.  This is the percentage used for the Deposit/First Payment Incentive commission portion based on the Tier</description>
        <name>varN_Deposit1stPaymentIncentivePercent</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <scale>4</scale>
    </variables>
    <variables>
        <description>Not editable by Sales Ops or Any Non-Admin User.  This is used to calculate eligibility for Quick First Payment Commission.  As of now, this is 65 days for all Tier Margins.</description>
        <name>varN_Deposit1stPaymentIncentiveThreshold</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
        <value>
            <numberValue>65.0</numberValue>
        </value>
    </variables>
    <variables>
        <description>If eligible for the Quick First Payment Commission, This is the Calculated Quick First Payment This is the Job Amount multiplied by the Quick First Payment Calculated Percent divided by 100.</description>
        <name>varP_DefaultDepositFirstPaymentMet</name>
        <dataType>Picklist</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
</Flow>
