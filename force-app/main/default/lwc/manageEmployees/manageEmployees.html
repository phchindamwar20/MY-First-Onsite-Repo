<template>
    <div style="margin:1%;">
        <template if:true={showManageCommissionScreen}>
        <lightning-modal-header label="Manage Commission"></lightning-modal-header>
        <lightning-modal-body>
                <lightning-layout multiple-rows="true">
                    <lightning-layout-item size="12" padding="around-small">
                        <div style="float:right">
                            <lightning-button variant="brand" class="slds-m-right_medium" label="Remove Employee" title="Remove Employee" onclick={handleRemoveEmployeeClick}></lightning-button>
                            <lightning-button variant="brand" label="Add Employee" title="Add Employee" onclick={handleAddEmployeeClick}></lightning-button>
                        </div>
                    </lightning-layout-item>
                    <lightning-layout-item size="12" padding="around-small">
                            <div class="slds-m-top_small">
                                <lightning-card variant="Narrow" title="Employee Commission" icon-name="standard:account">
                                    <div class="slds-var-m-around_medium">
                                        <div if:true={showTable}>
                                            <div if:true={dataTableResponseWrappper}>
                                                <div style="height:200px">
                                                    <lightning-datatable data={finalSObjectDataList} 
                                                        columns={dataTableResponseWrappper.lstDataTableColumns} 
                                                        key-field="Id"
                                                        onclick={getSelectedRec}
                                                        onsave={handleSave}
                                                        draft-values={saveDraftValues}
                                                        show-row-number-column>
                                                    </lightning-datatable>
                                                </div>
                                            </div>
                                            </div>
                                        <div if:false={showTable}>
                                            No data exist
                                        </div>
                                    </div>
                                </lightning-card>
                            </div>
                    </lightning-layout-item>
                    <lightning-layout-item size="12" padding="around-small">
                        <div>
                            <lightning-textarea name="exceptionReason" label="Exception Reason" value={exceptionReasonValue} placeholder="please type exception reason here..." required onchange={handleChangeExceptionReason}></lightning-textarea>
                        </div>
                    </lightning-layout-item>
                </lightning-layout>
        </lightning-modal-body>
        <lightning-modal-footer>
            <lightning-layout-item size="12" padding="around-small">
                <div style="float:right">
                    <lightning-button variant="brand" class="slds-m-right_medium" label="Cancel" title="Cancel" onclick={handleCancelClick}></lightning-button>
                    <lightning-button variant="brand" label="Next" title="Next" onclick={handleNextClick} disabled={disableNextButton}></lightning-button>
                </div>
            </lightning-layout-item>
        </lightning-modal-footer>
        </template>
        <!-- SHow modal popup -->
        <template if:true={showAddEmployee}>
            <div>
                <lightning-modal-header label="Add Employees"></lightning-modal-header>
                    <lightning-modal-body>
                        <!-- Body here -->
                        <c-manage-employee-reusable-lookup label="User" selected-icon-name="standard:user" object-label="User"
                            object-api-name="User" field-api-name="Name" other-field-api-name="FirstName"
                            onvalueselected={handleValueSelectedOnUser} selected-user-ids={selectedUserIds}>
                        </c-manage-employee-reusable-lookup>
                    </lightning-modal-body>
                    <lightning-modal-footer>
                        <!-- Footer here --> 
                        <lightning-button variant="brand" label="Back" title="Back" onclick={handleBackAddEmployeeClick}></lightning-button>
                        <lightning-button class="slds-p-left_medium" variant="brand" label="Add" title="Add" onclick={handleAddAddEmployeeClick}></lightning-button>
                    </lightning-modal-footer>
            </div>
        </template>

        <template if:true={showConfirmationScreen}>
            <lightning-modal-header label="Confirmation Screen"></lightning-modal-header>
            <lightning-modal-body>
                <lightning-layout multiple-rows="true">
                    <lightning-layout-item size="6" padding="around-small">
                        Actual Commissionable? : {jobCommissionRec.Actual_Commissionable__c}
                    </lightning-layout-item>
                    <lightning-layout-item size="6" padding="around-small">
                        Job Amount : {jobAmount}
                    </lightning-layout-item>
                    <lightning-layout-item size="6" padding="around-small">
                        Split Multiplier : {splitMultiplier}
                    </lightning-layout-item>
                    <lightning-layout-item size="6" padding="around-small">
                        Actual Quick Collection Incentive : {actualQuickCollIncentive}
                    </lightning-layout-item>
                    <lightning-layout-item size="6" padding="around-small">
                        Actual Slow Collection Incentive : {actualSlowCollIncentive}
                    </lightning-layout-item>
                    <lightning-layout-item size="6" padding="around-small">
                        Actual Deposit 1st Payment Incentive : {actualDepositPaymentIncentive}
                    </lightning-layout-item>
                    <lightning-layout-item size="12" padding="around-small">
                        Sum of Actual Total Commission Payment: {displayActualTotalCommissionPayment}
                    </lightning-layout-item>
                    <lightning-layout-item size="12" padding="around-small">
                        <div class="slds-m-top_small">
                            <lightning-card variant="Narrow" title="Employee Commission" icon-name="standard:account">
                                <div class="slds-var-m-around_medium">
                                    <div if:true={showTable}>
                                        <div if:true={confirmationDataTableResponseWrappper}>
                                            <div style="height:200px">
                                                <lightning-datatable data={confirmationFinalSObjectDataList} 
                                                    columns={confirmationDataTableResponseWrappper.lstDataTableColumns} 
                                                    key-field="Id"
                                                    hide-checkbox-column>
                                                </lightning-datatable>
                                            </div>
                                        </div>
                                        </div>
                                    <div if:false={showTable}>
                                        No data exist
                                    </div>
                                </div>
                            </lightning-card>
                        </div>
                    </lightning-layout-item>
                </lightning-layout>
                </lightning-modal-body>
                <lightning-modal-footer>
                    <lightning-layout-item size="12" padding="around-small">
                        <div style="float:right">
                            <lightning-button variant="brand" class="slds-m-right_medium" label="Previous" title="Previous" onclick={handleConfirmationScreenPreviousClick}></lightning-button>
                            <lightning-button variant="brand" class="slds-m-right_medium" label="Cancel" title="Cancel" onclick={handleCancelClick}></lightning-button>
                            <lightning-button variant="brand" label="Save" title="Save" onclick={handleConfirmationScreenSaveClick}></lightning-button>
                        </div>
                    </lightning-layout-item>
                </lightning-modal-footer>
        </template>
    </div>
</template>